"use strict";window.onload=function(){var e=document.querySelector(".login"),n=document.querySelector(".register"),t=document.querySelector(".denglu"),o=document.querySelector(".box1"),l=document.getElementById("email"),s=document.getElementById("password"),r=document.getElementById("email1"),a=document.getElementById("password1"),c=document.getElementsByClassName("emailWarning"),d=document.getElementsByClassName("passwordWarning");e.onclick=function(){this.style.color="skyblue",t.style.display="block",o.style.display="none",n.style.color="",s.value="",l.value="",c[0].innerHTML="",d[0].innerHTML=""},n.onclick=function(){this.style.color="skyblue",t.style.display="none",o.style.display="block",e.style.color="",a.value="",r.value="",c[1].innerHTML="",d[1].innerHTML=""};var i,u,m,y,p=/^[a-zA-Z\d]{3,12}@[a-zA-Z\d]+\.c(om|n)$/,g=/^[a-zA-Z\d]{8,25}$/,h=(l=document.getElementById("email"),s=document.getElementById("password"),r=document.getElementById("email1"),a=document.getElementById("password1"),c=document.getElementsByClassName("emailWarning"),d=document.getElementsByClassName("passwordWarning"),document.getElementById("log")),f=document.getElementById("create");l.onchange=function(){u=p.test(l.value)?(c[0].innerHTML="验证通过",c[0].style.color="green",!0):(c[0].innerHTML="邮箱不符合要求",!(c[0].style.color="red"))},s.onchange=function(){i=g.test(s.value)?(d[0].innerHTML="验证通过",d[0].style.color="green",!0):(d[0].innerHTML="密码必须是 8-25 个字符，且包含字母或数字",!(d[0].style.color="red"))},r.onchange=function(){y=p.test(r.value)?(c[1].innerHTML="验证通过",c[1].style.color="green",!0):(c[1].innerHTML="邮箱不符合要求",!(c[1].style.color="red"))},a.onchange=function(){m=g.test(a.value)?(d[1].innerHTML="验证通过",d[1].style.color="green",!0):(d[1].innerHTML="密码必须是 8-25 个字符，且包含字母或数字",!(d[1].style.color="red"))},h.onclick=function(){var e=s.value,n=l.value,t=hex_hmac_md5(n,e);if(e&&n){if(i&&u){var o=new XMLHttpRequest;o.open("post","php/login.php"),o.setRequestHeader("content-type","application/x-www-form-urlencoded"),o.send("username="+n+"&password="+e+"&cookieId="+t),o.onreadystatechange=function(){if(200==o.status&&4==o.readyState)if(0==o.response)alert(o.response.innerHTML="该账户未注册,请先创建账户");else{console.log(o.response);var e=new Date;e.setMonth(e.getMonth()+1),document.cookie="cookieId="+o.response+";expires="+e.toGMTString(),location.href="./index.html"}}}}else alert("邮箱地址和密码不能为空")},f.onclick=function(){var e=a.value,n=r.value,t=document.getElementById("tick").checked,o=hex_hmac_md5(n,e);if(e&&n&&t){if(m&&y&&t){var l=new XMLHttpRequest;l.open("post","php/register.php"),l.setRequestHeader("content-type","application/x-www-form-urlencoded"),l.send("username="+n+"&password="+e+"&cookieId="+o),l.onreadystatechange=function(){200==l.status&&4==l.readyState&&(1==l.response?alert(l.response.innerHTML="注册成功"):alert(l.response.innerHTML="注册失败"))}}}else alert("邮箱地址 密码 勾选不能为空")}};